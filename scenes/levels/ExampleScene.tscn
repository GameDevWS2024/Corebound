[gd_scene load_steps=22 format=3 uid="uid://dfkwq6qwtxw25"]

[ext_resource type="PackedScene" uid="uid://clfnjh8aelj66" path="res://scenes/prefabs/Player.tscn" id="1_7owxc"]
[ext_resource type="Texture2D" uid="uid://dweeg6vbxai1c" path="res://scenes/levels/bg.png" id="1_afw7h"]
[ext_resource type="Script" path="res://scripts/Enemy/EnemyManager.cs" id="1_bmkfv"]
[ext_resource type="Shader" path="res://scenes/levels/ExampleScene.gdshader" id="1_kbklw"]
[ext_resource type="Script" path="res://scripts/Map.cs" id="1_pa1ge"]
[ext_resource type="PackedScene" uid="uid://dkcg0yrtwyo0k" path="res://scenes/prefabs/PointLight.tscn" id="3_0raeo"]
[ext_resource type="Script" path="res://scripts/AI/VisibleForAI.cs" id="6_7bcmx"]
[ext_resource type="Texture2D" uid="uid://pfxvcht6t1ge" path="res://assets/sprites/icon.svg" id="6_gtht4"]
[ext_resource type="PackedScene" uid="uid://6gwtt7kwq2p" path="res://scenes/prefabs/Ally.tscn" id="6_l8h37"]
[ext_resource type="Script" path="res://scripts/Interaction/Interactable.cs" id="7_ji1nn"]
[ext_resource type="PackedScene" uid="uid://csb6x207vu85x" path="res://scenes/prefabs/copper_tree.tscn" id="7_njspg"]
[ext_resource type="Script" path="res://scripts/Interaction/Removeable.cs" id="8_vh33k"]
[ext_resource type="PackedScene" uid="uid://ki7e88gvvcs" path="res://scenes/prefabs/ice_tree.tscn" id="9_tf77n"]
[ext_resource type="PackedScene" uid="uid://bgxxp0o5kdpkq" path="res://scenes/prefabs/Enemy.tscn" id="10_tv6x7"]
[ext_resource type="Script" path="res://scripts/Core.cs" id="11_wagl7"]
[ext_resource type="PackedScene" uid="uid://dktm5pdu27ai2" path="res://scenes/prefabs/Ally2.tscn" id="13_668w2"]
[ext_resource type="Script" path="res://scenes/levels/IntroText.cs" id="14_trtui"]
[ext_resource type="Script" path="res://scripts/Items/SimpleInventoryDisplay.cs" id="16_0mir1"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8cl4m"]
shader = ExtResource("1_kbklw")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hnti7"]
shader = ExtResource("1_kbklw")

[sub_resource type="NavigationPolygon" id="NavigationPolygon_e7gay"]
vertices = PackedVector2Array(1266.62, 447, 2008.31, -361.039, 2031.96, -384.688, 2725.14, 2623.8, 1150.58, 914, 1257.96, 479.312, 293.289, 435.781, 472, 777.383, 439.688, 786.039, -138.383, 777, -147.039, 744.688, 253, 446.578, -382.383, -340, 1943.69, -361.039, 1976, -352.383, 1234.31, 391.039, 1202, 382.383, -391.039, -307.688, 2040.62, -417, 2625.71, -2710.33, 1169.69, 391.039, 333.578, 366, 322.781, 325.711, -414.688, -284.039, 253, 285.422, 212.711, 296.219, -817.383, 181, -826.039, 148.688, -447, -275.383, 1976, -481.617, 1943.69, -472.961, 269.617, -707, 260.961, -739.312, 2031.96, -449.312, 1139.78, 873.711, 1234.31, 502.961, 1257.96, 414.688, 1029.71, 844.219, 1000.22, 873.711, 536.617, 842, 527.961, 809.688, 1920.04, -384.688, 416.039, 809.688, 1146.04, 414.688, 183.219, 325.711, 1920.04, -449.312, 1139.78, 954.289, 1110.29, 844.219, 1202, 511.617, 2008.31, -472.961, -2664.95, -2506.47, 237.312, -651.039, 1911.38, -417, -391.039, -372.312, 205, -642.383, 407.383, 842, -147.039, 809.312, 1137.38, 447, 322.781, 406.289, 989.422, 914, 527.961, 874.312, 172.422, 366, -826.039, 213.312, 260.961, -674.688, 1110.29, 983.781, -2669.88, 2609.03, 1070, 994.578, 1029.71, 983.781, 1000.22, 954.289, 1169.69, 502.961, 1070, 833.422, -712.039, -987.688, -703.383, -1020, 504.312, 897.961, 472, 906.617, 1146.04, 479.312, 504.312, 786.039, 416.039, 874.312, -170.688, 832.961, 293.289, 296.219, 183.219, 406.289, -170.688, 721.039, -203, 712.383, -712.039, -1052.31, 212.711, 435.781, -235.312, 721.039, -258.961, 744.688, -849.688, 236.961, -882, 245.617, -267.617, 777, -735.688, -964.039, 205, -771.617, 172.688, -651.039, 149.039, -674.688, 140.383, -707, -414.688, -395.961, 439.688, 897.961, -203, 841.617, -235.312, 832.961, -258.961, 809.312, -914.312, 236.961, -937.961, 213.312, -946.617, 181, -937.961, 148.688, -914.312, 125.039, -502.961, -307.688, -882, 116.383, -511.617, -340, 149.039, -739.312, -447, -404.617, -768, -955.383, -479.312, -284.039, -849.688, 125.039, -502.961, -372.312, -479.312, -395.961, -823.961, -987.688, -800.312, -964.039, 237.312, -762.961, -735.688, -1075.96, -768, -1084.62, -800.312, -1075.96, -823.961, -1052.31, -832.617, -1020, 172.688, -762.961)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5), PackedInt32Array(6, 7, 8, 9, 10, 11), PackedInt32Array(12, 13, 14, 15, 16, 17), PackedInt32Array(18, 19, 3), PackedInt32Array(16, 20, 21, 22), PackedInt32Array(23, 24, 25, 26, 27, 28), PackedInt32Array(29, 30, 31, 32), PackedInt32Array(2, 18, 3), PackedInt32Array(19, 18, 33), PackedInt32Array(5, 4, 34, 35), PackedInt32Array(14, 1, 0, 36), PackedInt32Array(37, 38, 39, 40), PackedInt32Array(41, 13, 12), PackedInt32Array(9, 8, 42), PackedInt32Array(21, 20, 43), PackedInt32Array(26, 25, 44), PackedInt32Array(31, 30, 45), PackedInt32Array(46, 4, 3), PackedInt32Array(35, 34, 47, 48), PackedInt32Array(19, 33, 49), PackedInt32Array(50, 19, 49, 29), PackedInt32Array(51, 52, 41, 12, 53, 54), PackedInt32Array(9, 42, 55, 56), PackedInt32Array(21, 43, 57, 58), PackedInt32Array(39, 38, 59, 60), PackedInt32Array(26, 44, 61, 62), PackedInt32Array(31, 45, 52, 63), PackedInt32Array(14, 36, 15), PackedInt32Array(64, 46, 3), PackedInt32Array(64, 3, 65, 66), PackedInt32Array(67, 66, 65), PackedInt32Array(68, 67, 65), PackedInt32Array(69, 48, 47, 70), PackedInt32Array(71, 72, 29), PackedInt32Array(73, 59, 68, 65, 74), PackedInt32Array(58, 57, 75, 70, 37, 40, 76), PackedInt32Array(56, 55, 77, 78), PackedInt32Array(23, 17, 16, 79, 24), PackedInt32Array(62, 61, 80, 81, 82), PackedInt32Array(29, 72, 83), PackedInt32Array(75, 69, 70), PackedInt32Array(58, 76, 7, 6), PackedInt32Array(84, 11, 10), PackedInt32Array(80, 84, 10, 81), PackedInt32Array(62, 82, 85), PackedInt32Array(62, 85, 86, 87), PackedInt32Array(88, 87, 86, 89, 65), PackedInt32Array(90, 71, 29, 91), PackedInt32Array(51, 63, 52), PackedInt32Array(92, 54, 53), PackedInt32Array(93, 92, 53), PackedInt32Array(94, 93, 53, 95), PackedInt32Array(73, 60, 59), PackedInt32Array(96, 74, 65), PackedInt32Array(78, 77, 96, 65, 97), PackedInt32Array(98, 97, 65), PackedInt32Array(99, 98, 65), PackedInt32Array(89, 99, 65), PackedInt32Array(100, 88, 65), PackedInt32Array(101, 100, 65), PackedInt32Array(101, 65, 50, 102), PackedInt32Array(103, 102, 50), PackedInt32Array(104, 103, 50), PackedInt32Array(105, 106, 104, 50, 107), PackedInt32Array(90, 108, 94, 95, 109, 110), PackedInt32Array(16, 22, 79), PackedInt32Array(111, 28, 27, 112), PackedInt32Array(105, 111, 112, 106), PackedInt32Array(113, 107, 50), PackedInt32Array(114, 113, 50), PackedInt32Array(109, 114, 50, 115, 116), PackedInt32Array(29, 32, 117), PackedInt32Array(29, 83, 118), PackedInt32Array(50, 29, 118, 119), PackedInt32Array(50, 119, 120), PackedInt32Array(50, 120, 121), PackedInt32Array(50, 121, 122), PackedInt32Array(50, 122, 115), PackedInt32Array(109, 116, 110), PackedInt32Array(123, 108, 90), PackedInt32Array(91, 123, 90), PackedInt32Array(91, 29, 117)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-2706, -2546, -2711, 2650, 2767, 2665, 2666, -2753)])
source_geometry_mode = 1
source_geometry_group_name = &"navigation"
agent_radius = 41.08

[node name="Node2D" type="Node2D"]
position = Vector2(2595, 2509)
script = ExtResource("1_pa1ge")

[node name="TextureRect" type="TextureRect" parent="."]
visible = false
material = SubResource("ShaderMaterial_8cl4m")
offset_left = -2550.0
offset_top = -2488.0
offset_right = 2516.0
offset_bottom = 2500.0
texture = ExtResource("1_afw7h")
metadata/_edit_use_anchors_ = true
metadata/_edit_lock_ = true

[node name="Player" parent="." instance=ExtResource("1_7owxc")]
unique_name_in_owner = true
material = SubResource("ShaderMaterial_hnti7")
position = Vector2(473, 357)

[node name="Camera2D" type="Camera2D" parent="Player"]
light_mask = 2
visibility_layer = 2
position = Vector2(249.5, 28.3081)
scale = Vector2(0.5, 0.570093)
zoom = Vector2(0.8, 0.8)
position_smoothing_enabled = true
position_smoothing_speed = 7.0

[node name="PlayerVisibleForAI" type="Node2D" parent="Player"]
script = ExtResource("6_7bcmx")
NameForAi = "Player"

[node name="Obstacles" type="Node" parent="."]

[node name="GodotLogo" type="Node2D" parent="Obstacles"]
position = Vector2(3095, 2509)
scale = Vector2(0.4, 0.4)
script = ExtResource("6_7bcmx")
NameForAi = "Hut"
DescribtionForAi = "It looks kind of creepy"

[node name="Sprite2D" type="Sprite2D" parent="Obstacles/GodotLogo"]
texture = ExtResource("6_gtht4")

[node name="Interactable" type="Node2D" parent="Obstacles/GodotLogo"]
script = ExtResource("7_ji1nn")

[node name="Removable" type="Node" parent="Obstacles/GodotLogo"]
script = ExtResource("8_vh33k")

[node name="Tree" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(2131, 1976)

[node name="Tree7" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(1810, 1296)

[node name="Tree8" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(2783, 1609)

[node name="Tree2" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(1696, 2497)

[node name="Tree3" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(3050, 3158)

[node name="Tree4" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(2375, 3093)

[node name="Tree5" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(3780, 2763)

[node name="Tree6" parent="Obstacles" instance=ExtResource("7_njspg")]
position = Vector2(4554, 1899)

[node name="Tree10" parent="Obstacles" instance=ExtResource("9_tf77n")]
position = Vector2(3648, 3230)

[node name="Tree11" parent="Obstacles" instance=ExtResource("9_tf77n")]
position = Vector2(2831, 2682)

[node name="Ally" parent="." node_paths=PackedStringArray("AllwaysVisible") instance=ExtResource("6_l8h37")]
position = Vector2(834, 254)
_visionRadius = 3000
_interactionRadius = 500
AllwaysVisible = [NodePath("../Player/PlayerVisibleForAI")]

[node name="EnemyManager" type="Node2D" parent="."]
script = ExtResource("1_bmkfv")
EnemyScene = ExtResource("10_tv6x7")
_maxEnemies = 0

[node name="Core" type="Node2D" parent="."]
unique_name_in_owner = true
script = ExtResource("11_wagl7")

[node name="CoreLight" parent="Core" instance=ExtResource("3_0raeo")]
unique_name_in_owner = true
visible = false
color = Color(0.767814, 0.714527, 0.618239, 1)
energy = 4.8
shadow_enabled = true
shadow_color = Color(0.0643274, 0.0646954, 0.0657012, 0)
shadow_filter = 2
shadow_filter_smooth = 2.3
texture_scale = 36.64
metadata/_edit_lock_ = true

[node name="InventoryDisplay" type="RichTextLabel" parent="Core"]
offset_left = 612.0
offset_top = 272.0
offset_right = 902.0
offset_bottom = 447.0
script = ExtResource("16_0mir1")

[node name="Ally2" parent="." instance=ExtResource("13_668w2")]
visible = false
position = Vector2(602, 378)

[node name="IntroText" type="CanvasLayer" parent="."]
script = ExtResource("14_trtui")

[node name="Panel" type="Panel" parent="IntroText"]
offset_left = 2584.0
offset_top = 2503.0
offset_right = 2624.0
offset_bottom = 2543.0
metadata/_edit_use_anchors_ = true

[node name="Label" type="Label" parent="IntroText/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 2.65
anchor_top = 2.85
anchor_right = 15.05
anchor_bottom = 2.85
offset_right = 40.0
offset_bottom = 23.0
text = "\"Stay in the light! Say 'Harvest' to tell your ally to get some resources\""
metadata/_edit_use_anchors_ = true

[node name="Close" type="Button" parent="IntroText/Panel"]
process_mode = 2
z_index = 20
layout_mode = 1
anchors_preset = -1
anchor_left = 1.075
anchor_top = 2.075
anchor_right = 2.85
anchor_bottom = 2.65
offset_right = 8.0
offset_bottom = 8.0
text = "Continue"
metadata/_edit_use_anchors_ = true

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
z_index = 300
navigation_polygon = SubResource("NavigationPolygon_e7gay")
metadata/_edit_lock_ = true

[connection signal="Interact" from="Obstacles/GodotLogo/Interactable" to="Obstacles/GodotLogo/Removable" method="Remove"]
[connection signal="pressed" from="IntroText/Panel/Close" to="IntroText" method="OnClosePressed"]
