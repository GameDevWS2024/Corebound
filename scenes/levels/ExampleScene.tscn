[gd_scene load_steps=11 format=3 uid="uid://dfkwq6qwtxw25"]

[ext_resource type="PackedScene" uid="uid://clfnjh8aelj66" path="res://scenes/prefabs/Player.tscn" id="1_7owxc"]
[ext_resource type="Texture2D" uid="uid://dweeg6vbxai1c" path="res://scenes/levels/bg.png" id="1_afw7h"]
[ext_resource type="Shader" path="res://scenes/levels/ExampleScene.gdshader" id="1_kbklw"]
[ext_resource type="PackedScene" uid="uid://dkcg0yrtwyo0k" path="res://scenes/prefabs/PointLight.tscn" id="3_0raeo"]
[ext_resource type="Script" path="res://scripts/Chat.cs" id="4_jkuxm"]
[ext_resource type="PackedScene" uid="uid://b167i7npqa2mb" path="res://scenes/prefabs/Allie.tscn" id="5_l5nbp"]
[ext_resource type="PackedScene" uid="uid://csb6x207vu85x" path="res://scenes/prefabs/Tree.tscn" id="7_njspg"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8cl4m"]
shader = ExtResource("1_kbklw")

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_2qsjx"]
polygon = PackedVector2Array(-2540, 2494, 2492, 2514, 2519, -2511, -2569, -2494)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_y1idm"]
vertices = PackedVector2Array(-173.57, 361.93, -70.0625, 353.93, 175.43, 353.93, 10.4297, 384.57, -235.062, 384.57, 579.43, 306.93, 925.43, 636.57, 679.953, 636.57, 10.4297, 580.93, 333.953, 306.93, -419.062, 361.93, 2441.3, -2449.61, 2397.32, 2424.82, 925.43, 832.93, -2478.21, 2424.82, 679.953, 832.93, -268.57, 734.93, -514.062, 734.93, -2512.42, -2432.02, -514.062, 538.57, 579.43, 110.57, 333.953, 110.57, 175.43, 157.57, -70.0625, 157.57, -235.062, 580.93, -268.57, 538.57, -419.062, 165.57, -173.57, 165.57)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(2, 5, 6, 7, 8, 3), PackedInt32Array(9, 5, 2), PackedInt32Array(10, 0, 4), PackedInt32Array(11, 12, 13, 6), PackedInt32Array(13, 12, 14, 15), PackedInt32Array(7, 15, 14, 16, 8), PackedInt32Array(17, 16, 14), PackedInt32Array(17, 14, 18, 19), PackedInt32Array(11, 6, 5, 20), PackedInt32Array(18, 11, 20, 21), PackedInt32Array(9, 2, 22, 21), PackedInt32Array(18, 21, 22, 23), PackedInt32Array(24, 8, 16), PackedInt32Array(24, 16, 25, 4), PackedInt32Array(10, 4, 25, 19), PackedInt32Array(10, 19, 18, 26), PackedInt32Array(26, 18, 23, 27), PackedInt32Array(27, 23, 1, 0)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-2569, -2488, -2534, 2481, 2453, 2481, 2498, -2506)])
source_geometry_mode = 1
source_geometry_group_name = &"navigation"
agent_radius = 56.18

[node name="Node2D" type="Node2D"]

[node name="TextureRect" type="TextureRect" parent="."]
material = SubResource("ShaderMaterial_8cl4m")
offset_left = -2550.0
offset_top = -2488.0
offset_right = 2516.0
offset_bottom = 2500.0
texture = ExtResource("1_afw7h")

[node name="LightOccluder2D" type="LightOccluder2D" parent="TextureRect"]
modulate = Color(0.099986, 0.099986, 0.099986, 1)
self_modulate = Color(0.0605304, 0.0605303, 0.0605303, 1)
light_mask = 3
visibility_layer = 3
position = Vector2(2550, 2500)
occluder = SubResource("OccluderPolygon2D_2qsjx")
occluder_light_mask = 3

[node name="PointLight2D" parent="." instance=ExtResource("3_0raeo")]
position = Vector2(139, 371)
color = Color(0.365852, 0.353147, 9.62615e-08, 1)
energy = 8.35
shadow_enabled = true
shadow_color = Color(0.0643274, 0.0646954, 0.0657012, 0)
shadow_filter = 2
shadow_filter_smooth = 2.3
texture_scale = 43.45

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="LineEdit" type="LineEdit" parent="CanvasLayer" node_paths=PackedStringArray("_richTextLabel")]
offset_left = -3.0
offset_top = 83.0
offset_right = 364.0
offset_bottom = 185.0
placeholder_text = "Type here to chat"
virtual_keyboard_type = 1
clear_button_enabled = true
script = ExtResource("4_jkuxm")
_systemPromptFile = "res://assets/prompts/example_prompt.txt"
_richTextLabel = NodePath("../RichTextLabel")

[node name="RichTextLabel" type="RichTextLabel" parent="CanvasLayer"]
offset_left = 24.0
offset_top = 198.0
offset_right = 525.0
offset_bottom = 847.0
bbcode_enabled = true
text = "
"
fit_content = true
scroll_following = true

[node name="allie1" parent="." instance=ExtResource("5_l5nbp")]
unique_name_in_owner = true
_targetDistanceVariation = 150

[node name="Player" parent="." instance=ExtResource("1_7owxc")]
unique_name_in_owner = true
position = Vector2(473, 357)

[node name="Camera2D" type="Camera2D" parent="Player"]
light_mask = 2
visibility_layer = 2
position = Vector2(249.5, 28.3081)
scale = Vector2(0.5, 0.570093)
zoom = Vector2(0.8, 0.8)
position_smoothing_enabled = true
position_smoothing_speed = 7.0

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
visible = false
position = Vector2(-26, -69)
navigation_polygon = SubResource("NavigationPolygon_y1idm")
metadata/_edit_lock_ = true

[node name="Obstacles" type="Node" parent="."]

[node name="Tree" parent="Obstacles" groups=["navigation"] instance=ExtResource("7_njspg")]
position = Vector2(8, -2)

[node name="Tree2" parent="Obstacles" groups=["navigation"] instance=ExtResource("7_njspg")]
position = Vector2(-436, 379)

[node name="Tree3" parent="Obstacles" groups=["navigation"] instance=ExtResource("7_njspg")]
position = Vector2(758, 477)

[node name="Tree4" parent="Obstacles" groups=["navigation"] instance=ExtResource("7_njspg")]
position = Vector2(-157, 225)

[node name="Tree5" parent="Obstacles" groups=["navigation"] instance=ExtResource("7_njspg")]
position = Vector2(-341, 6)

[node name="Tree6" parent="Obstacles" groups=["navigation"] instance=ExtResource("7_njspg")]
position = Vector2(412, -49)

[connection signal="text_submitted" from="CanvasLayer/LineEdit" to="CanvasLayer/LineEdit" method="OnTextSubmitted"]
